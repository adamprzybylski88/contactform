const fs = require('fs')

const applyDefaults = require('./apply-defaults')

module.exports = function fileSize(filepath, options) {
	var defaults = {
		interpreter: false
	};

	const _options = applyDefaults(options, defaults) // if undefined return defaults

	var FILE_SIZE;
	if (typeof(filepath) == 'string') {
		FILE_SIZE = fs.statSync(filepath).size;
	} else if (typeof(filepath) == 'number') {
		FILE_SIZE = filepath;
	}
	if (_options !== undefined &&
		_options.interpreter == true) {
		return FILE_SIZE > 1000000 ? FILE_SIZE = (FILE_SIZE / 1000000).toFixed(2) + ' [mb]' : FILE_SIZE = (FILE_SIZE / 1000).toFixed(2) + ' [kb]';
	} else {
		return FILE_SIZE
	}
}